


on startup
    start mdns listener
    wait till airfoil instance found
        if no airfoil instance found and running on same machine
            optionally launch airfoil

which airfoil to use
    the url scheme for most verbs will look something like this
        {remoteFoil server}/{airfoil instance name}/{verb}/{option}
        http://ubuntuvm/desktop/speakers
        http://ubuntuvm/desktop/speaker/connect/living_room_speaker
    call root url to get list of available airfoil speakers
    if debug=true , calling root also returns a list of all current uris to aid in setup
        maybe turn that off when done setting up, but it's not like the undocumented socket we're talking to using
        an also undocumented, reverse-engineered control protocol is secured to begin with

    if there are multiple, by default we use the first discovered airfoil instance
        if our instance disappears, automatically move to next instance
            unless name is specified then we just wait that name to reappear
        if all instances disappear , wait until new instance appears in the future
            cli will time out after 10 seconds (or --timeout {number} (in secs))
    allow for specifying name when creating instance or from cli

with airfoil selected, the following endpoints will be created
    /  <- return all possible uris if debug, else, return array of speaker names, ips, ports
    /speakers
        retrieve list of speakers with name, icon, volume, connect state, id
        call with speaker name should use name of speaker lower case with underscores for spaces in uri
        Living_Room Left Speaker -> /speaker/connect/living_room_left_speaker
    /speaker/connect/{speaker_name}
    /speaker/disconnect/{speaker_name}
    /speaker/connnect    <-- connect all speakers
    /speaker/disconnect  <-- disconnect all speakers
    /speaker/volume/{speaker_name}/  <- retrieve current volume for speaker
        set volume for speaker below >>
    /speaker/volume/{speaker_name}/{level as number between 0 and 1 with at least 6 digit precision)
    /speaker/volume/{speaker_name}/mute
    /speaker/volume/{speaker_name}/unmute
    /sources
        get list and state of all sources, including which is selected, and uri names for each
    /sources/recent
    /sources/running
    /sources/devices
        filtered list of results for just calling /sources/
    /sources/connect/system_audio
    /sources/connect/{uri name of source}
    /sources/connect/spotify
    /sources/connect/microphone   <- short for 'Microphone (Generic USB Audio Device   )'
        can be substring but first match will be used
        use multiple substrings with __
        /sources/connect/usb__microphone would get 'Microphone (Generic USB Audio Device   )'
        to distinguish multiple devices use enough of the name to be distinctive
    /now_playing/
        retrieve metadata for currently playing music according to airfoil


Airfoil class will provide an interface into the selected instance of Airfoil and provide the verbs
necessary to implement the rest api and cli

Web class will implement uri structure to implement each verb for each instance of airfoil simultaneously
https://tutorialedge.net/python/create-rest-api-python-aiohttp/
https://aiohttp.readthedocs.io/en/stable/




parse urls

if length parts 1
    part[0] == ''
        return json object with list of airfoil instances
    part[0] == 'name'
        return json object with (ip, host, name) of airfoil
if length parts 2
    if name in finder airfoils
        part[1] = speakers
            return json with speakers
        part[1] = sources
            return json with sources
        part[1] = now_playing
           return json with current track
    else none
if length > 2
    part[1] = speaker
        get_speakers
        if speaker in speaker list by name or keywords
            part[2] = connect -> connect speaker
            part[2] = disconnect -> disconnect speaker
            part[2] = toggle -> toggle speaker
            part[2] = mute -> mute speaker
            part[2] = unmute -> unmute speaker
            part[2] = volume -> volume/part[3]
            part[2] = fade -> fade_volume
                part[3] -> end_volume
                part[4] -> seconds
                part[5] -> ticks
    part[1] = speakers
        get_speakers
        part[2] = fade -> fade volume for all speakers unless ids or names are passed
            part[3] -> end_volume
            part[4] -> seconds, optional, default 5
            part[5] -> ticks, optional, default 10
        part[2] = toggle -> toggle all speakers unless ids or names are passed
        part[2] = mute -> mute all speakers unless ids or names are passed
        part[2] = unmute -> unmute all speakers unless ids or names are passed
        part[2] = volume ->  set volume on all speakers unless ids or names are passed
            part[3] -> volume, required
    part[1] = play -> play
    part[1] = next -> next_track
    part[1] = last -> last_track
    part[1] = source -> get current source
        part[2] = set to source if valid source name, can be valid name, id, or keywords



if length